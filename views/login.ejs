<!--
  Página de Login
  
  Formulario de inicio de sesión con diseño moderno usando glassmorphism.
  Incluye validación y feedback visual de errores.
-->

<div class="container d-flex justify-content-center align-items-center" style="min-height: 100vh;">
  <div class="col-12 col-sm-10 col-md-6 col-lg-5 col-xl-4">
    <!-- Card de login con efecto glass -->
    <div class="card glass-effect shadow-lg fade-in">
      <div class="card-body p-4 p-md-5">
        <!-- Logo/Título -->
        <div class="text-center mb-4">
          <h2 class="text-gradient fw-bold mb-2">Game Collection</h2>
          <p class="text-secondary">Inicia sesión para gestionar tu colección</p>
        </div>
        
        <!-- Mensaje de error si las credenciales son incorrectas -->
        <% if (locals.error) { %>
          <div class="alert alert-danger d-flex align-items-center mb-4 slide-in" role="alert">
            <div><%= error %></div>
          </div>
        <% } %>

        <!-- Formulario de login -->
        <form action="/login" method="POST" class="needs-validation" novalidate>
          <!-- Campo de usuario/email -->
          <div class="mb-4">
            <label for="name" class="form-label">
              Usuario
            </label>
            <input 
              type="text" 
              class="form-control form-control-lg" 
              id="name" 
              name="name" 
              placeholder="admin" 
              required
              autocomplete="username"
            >
            <div class="invalid-feedback">
              Por favor, introduce tu usuario
            </div>
          </div>
          
          <!-- Campo de contraseña -->
          <div class="mb-4">
            <label for="password" class="form-label">
              Contraseña
            </label>
            <input 
              type="password" 
              class="form-control form-control-lg" 
              id="password" 
              name="password" 
              placeholder="••••••••" 
              required
              autocomplete="current-password"
            >
            <div class="invalid-feedback">
              Por favor, introduce tu contraseña
            </div>
          </div>
          
          <!-- Botón de submit -->
          <div class="d-grid mb-4">
            <button type="submit" class="btn btn-primary btn-lg py-3 hover-lift">
              <span style="font-size: 1.1rem;">Iniciar Sesión</span>
            </button>
          </div>
          
          <!-- Información de credenciales por defecto -->
          <div class="text-center">
            <p class="text-secondary small mb-2">
              <strong>Credenciales por defecto:</strong>
            </p>
            <p class="text-muted small mb-0">
              Usuario: <code style="color: var(--primary-color);">admin</code> • 
              Contraseña: <code style="color: var(--primary-color);">admin</code>
            </p>
          </div>
        </form>
      </div>
      
      <!-- Footer del card -->
      <div class="card-footer text-center py-3" style="background: rgba(255, 255, 255, 0.02); border-top: 1px solid rgba(255, 255, 255, 0.1);">
        <a href="/" class="text-secondary text-decoration-none hover-lift d-inline-block">
          Volver al inicio
        </a>
      </div>
    </div>
    
    <!-- Texto decorativo debajo del formulario -->
    <div class="text-center mt-4">
      <p class="text-muted small">
        Tu colección es privada y segura
      </p>
    </div>
  </div>
</div>

<!-- Estilos adicionales específicos para la página de login -->
<style>
  /* Efecto de enfoque mejorado para los inputs */
  .form-control:focus {
    transform: scale(1.02);
  }
  
  /* Mejorar el aspecto de los códigos */
  code {
    background: rgba(102, 126, 234, 0.2);
    padding: 0.2rem 0.5rem;
    border-radius: 4px;
    font-family: 'Courier New', monospace;
  }
  
  /* Animación del botón de submit */
  .btn-primary:active {
    transform: scale(0.98);
  }
  
  /* Mejorar el feedback de validación */
  .invalid-feedback {
    color: var(--danger-color);
    font-size: 0.875rem;
    margin-top: 0.5rem;
  }
  
  .was-validated .form-control:invalid {
    border-color: var(--danger-color);
  }
  
  .was-validated .form-control:valid {
    border-color: var(--success-color);
  }
  
  /* Responsive adjustments */
  @media (max-width: 576px) {
    .card-body {
      padding: 2rem 1.5rem !important;
    }
    
    .btn-lg {
      padding: 0.75rem 1.5rem !important;
    }
  }
</style>

<!-- Script para validación del formulario -->
<script>
  // Validación de Bootstrap
  (function() {
    'use strict';
    
    // Obtener el formulario
    const form = document.querySelector('.needs-validation');
    
    // Añadir evento de submit
    form.addEventListener('submit', function(event) {
      // Si el formulario no es válido
      if (!form.checkValidity()) {
        event.preventDefault();
        event.stopPropagation();
      }
      
      // Añadir clase para mostrar feedback de validación
      form.classList.add('was-validated');
    }, false);
  })();
  
  // Animación de entrada suave
  document.addEventListener('DOMContentLoaded', function() {
    const card = document.querySelector('.card');
    card.style.opacity = '0';
    card.style.transform = 'translateY(20px)';
    
    setTimeout(() => {
      card.style.transition = 'all 0.6s ease';
      card.style.opacity = '1';
      card.style.transform = 'translateY(0)';
    }, 100);
  });
</script>